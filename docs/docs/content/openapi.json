{
  "openapi": "3.1.0",
  "info": {
    "title": "Analytical Pattern Management API",
    "description": "API to manage AP",
    "version": "1.0.0"
  },
  "paths": {
    "/": {
      "get": {
        "summary": "Index",
        "operationId": "index__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/aps/": {
      "post": {
        "tags": [
          "v1",
          "aps"
        ],
        "summary": "Create Ap",
        "description": "Registers a new Analytical Pattern",
        "operationId": "create_ap_api_v1_aps__post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AnalyticalPattern"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreatePayload"
                }
              }
            }
          },
          "500": {
            "description": "Database error or unexpected server error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/aps/{id}": {
      "get": {
        "tags": [
          "v1",
          "aps"
        ],
        "summary": "Retrieve Ap",
        "description": "Retrieves an Analytical Pattern whole graph by the UUID of the Analytical Pattern Node.",
        "operationId": "retrieve_ap_api_v1_aps__id__get",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "The Analytical Pattern Node UUID to look for",
              "title": "Id"
            },
            "description": "The Analytical Pattern Node UUID to look for"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AnalyticalPattern"
                }
              }
            }
          },
          "404": {
            "description": "Analytical Pattern not found"
          },
          "500": {
            "description": "Database error or unexpected server error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/aps/display": {
      "post": {
        "tags": [
          "v1",
          "aps"
        ],
        "summary": "Display Ap",
        "description": "Returns an SVG representation of the Analytical Pattern.",
        "operationId": "display_ap_api_v1_aps_display_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AnalyticalPattern"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "SVG representation of the Analytical Pattern",
            "content": {
              "application/json": {
                "schema": {}
              },
              "image/svg+xml": {}
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/aps/validate": {
      "post": {
        "tags": [
          "v1",
          "aps"
        ],
        "summary": "Validate Ap",
        "description": "Ensure the provided PG-JSON is a valid Analytical Pattern. Return the list of errors if validation fails.\nThe input must first be a valid PG-JSON.\nIf the payload is not a valid PG-JSON, a 422 error will be returned, and no Analytical Pattern validation will be performed.",
        "operationId": "validate_ap_api_v1_aps_validate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PgJson"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationPayload"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tasks/": {
      "post": {
        "tags": [
          "v1",
          "tasks"
        ],
        "summary": "Create Task",
        "description": "Registers a new Task",
        "operationId": "create_task_api_v1_tasks__post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTaskInput"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreatePayload"
                }
              }
            }
          },
          "500": {
            "description": "Database error or unexpected server error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tasks/{id}/aps": {
      "get": {
        "tags": [
          "v1",
          "tasks"
        ],
        "summary": "Retrieve Aps",
        "description": "Returns all Analytical Pattern associated to the given Task ID.",
        "operationId": "retrieve_aps_api_v1_tasks__id__aps_get",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "The Task UUID to look for",
              "title": "Id"
            },
            "description": "The Task UUID to look for"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "title": "Response Retrieve Aps Api V1 Tasks  Id  Aps Get"
                }
              }
            }
          },
          "404": {
            "description": "Task not found"
          },
          "500": {
            "description": "Database error or unexpected server error"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/health": {
      "get": {
        "tags": [
          "v1"
        ],
        "summary": "Health Check",
        "operationId": "health_check_api_v1_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AnalyticalPattern": {
        "properties": {
          "nodes": {
            "items": {
              "$ref": "#/components/schemas/PgJsonNode"
            },
            "type": "array",
            "title": "Nodes"
          },
          "edges": {
            "items": {
              "$ref": "#/components/schemas/PgJsonEdge"
            },
            "type": "array",
            "title": "Edges"
          }
        },
        "type": "object",
        "required": [
          "nodes",
          "edges"
        ],
        "title": "AnalyticalPattern"
      },
      "CreatePayload": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          }
        },
        "type": "object",
        "required": [
          "id"
        ],
        "title": "CreatePayload"
      },
      "CreateTaskInput": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "request": {
            "type": "string",
            "title": "Request"
          }
        },
        "type": "object",
        "required": [
          "name",
          "request"
        ],
        "title": "CreateTaskInput"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "PgJson": {
        "properties": {
          "nodes": {
            "items": {
              "$ref": "#/components/schemas/PgJsonNode"
            },
            "type": "array",
            "title": "Nodes"
          },
          "edges": {
            "items": {
              "$ref": "#/components/schemas/PgJsonEdge"
            },
            "type": "array",
            "title": "Edges"
          }
        },
        "type": "object",
        "required": [
          "nodes",
          "edges"
        ],
        "title": "PgJson"
      },
      "PgJsonEdge": {
        "properties": {
          "from": {
            "type": "string",
            "title": "From"
          },
          "labels": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Labels"
          },
          "to": {
            "type": "string",
            "title": "To"
          },
          "properties": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Properties",
            "default": {}
          }
        },
        "type": "object",
        "required": [
          "from",
          "labels",
          "to"
        ],
        "title": "PgJsonEdge"
      },
      "PgJsonNode": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "labels": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Labels"
          },
          "properties": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Properties",
            "default": {}
          }
        },
        "type": "object",
        "required": [
          "id",
          "labels"
        ],
        "title": "PgJsonNode"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "ValidationPayload": {
        "properties": {
          "valid": {
            "type": "boolean",
            "title": "Valid"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors"
          }
        },
        "type": "object",
        "required": [
          "valid",
          "errors"
        ],
        "title": "ValidationPayload"
      }
    }
  }
}